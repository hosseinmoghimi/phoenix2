{% extends "dashboard/layout.html" %}
{% load static %}


{% block head %}
<style>
  .em25 {
    font-size: 2.5em;
  }
</style>
{% endblock  %}


{% block ofbar %}

{% endblock  %}


{% block content %}



<div class="row" id="app">
  <div class="col-lg-2"></div>
  <div class="col-lg-8">
    <div class="page-categories">
      <h3 class="title text-center">مدیریت پروژه ها</h3>
      <br>
      <ul class="nav nav-pills nav-pills-success nav-pills-icons justify-content-center" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" data-toggle="tab" href="#link7" role="tablist">
            <i class="material-icons">info</i> پروژه ها
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-toggle="tab" href="#link8" role="tablist">
            <i class="material-icons">engineering</i> پیمانکار ها
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-toggle="tab" href="#link9" role="tablist">
            <i class="material-icons">gavel</i>متریال ها
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-toggle="tab" href="#link10" role="tablist">
            <i class="material-icons">apartment</i> چارت سازمانی
          </a>
        </li>
      </ul>
      <div class="tab-content tab-space tab-subcategories">
        <div class="tab-pane  active" id="link7">
          <div class="card">
            <div class="card-header">
              <h4 class="card-title text-right">پروژه های شما</h4>
              <p class="card-category">
                اطلاعات بیشتر
              </p>
            </div>
            <div class="card-body">

              <p>
                ریشه‌ی مدیریت پروژه به روش‌ها و فرآیندهایی برمی‌گردد که حدود صد سال پیش در کسب‌و‌کار توسعه پیدا کردند.
                با این حال، در سال‌های اخیر، مدیریت پروژه رشد چشمگیری داشته و به عنوان یک عملیات مجزا و جدی در تجارت
                ظهور کرده است و در صحنه‌ی تجارت جهانی، یعنی جایی که شرکت‌ها دائما به دنبال رسیدن به مزیت رقابتی هستند،
                به یک عامل کلیدی تبدیل شده است. در مقاله زیر با مفهوم مدیریت پروژه بیشتر آشنا خواهید شد.


                <br>
              </p>
              <div>
               

               
                <template v-for="project in projects">
                  <div v-html="project.get_link"></div>


                </template>
              </div>
              {% if add_project_form %}
              <div class="mt-5 mx-5">
                <div class="form-group bmd-form-group">
                  <label for="exampleInput1" class="bmd-label-floating">نام پروژه جدید</label>
                  {% csrf_token %}
                  <input type="hidden" name="parent_id" value="0">
                  <input v-model="title_project" type="text" class="form-control" id="exampleInput1" name="title" required=""
                    aria-required="true">


                </div>
                <input type="button" @click="add_project" class="btn btn-next btn-fill btn-rose btn-wd" name="next"
                  value="افزودن">

              </div>
              {% endif %}


            </div>
          </div>
        </div>
        <div class="tab-pane" id="link8">
          <div class="card">
            <div class="card-header">
              <h4 class="card-title farsi text-right">پیمانکار ها</h4>
              <p class="card-category">
               لیست پیمانکار های ثبت شده
              </p>
            </div>
            <div class="card-body">
              <template v-for="contractor in contractors">
                <div v-html="contractor.get_link"></div>


              </template>


              {% if add_contracotr_form %}
              <div class="mt-5 mx-5">
                <div class="form-group bmd-form-group">
                  <label for="exampleInput1" class="bmd-label-floating">نام پیمانکار جدید</label>
                  {% csrf_token %}
                  <input type="hidden" name="parent_id" value="0">
                  <input v-model="title_contractor" type="text" class="form-control" id="exampleInput1" name="title" required=""
                    aria-required="true">


                </div>
                <input type="button" @click="add_contractor" class="btn btn-next btn-fill btn-rose btn-wd" name="next"
                  value="افزودن">

              </div>
              {% endif %}
           
              

            </div>
          </div>
        </div>
        <div class="tab-pane" id="link9">
          <div class="card">
            <div class="card-header">
              <h4 class="card-title">Legal info of the product</h4>
              <p class="card-category">
                More information here
              </p>
            </div>
            <div class="card-body">
              Completely synergize resource taxing relationships via premier niche markets. Professionally cultivate
              one-to-one customer service with robust ideas.
              <br>
              <br>Dynamically innovate resource-leveling customer service for state of the art customer service.
            </div>
          </div>
        </div>
        <div class="tab-pane" id="link10">
          <div class="card">
            <div class="card-header">
              <h4 class="card-title">Help center</h4>
              <p class="card-category">
                More information here
              </p>
            </div>
            <div class="card-body">
              From the seamless transition of glass and metal to the streamlined profile, every detail was carefully
              considered to enhance your experience. So while its display is larger, the phone feels just right.
              <br>
              <br> Another Text. The first thing you notice when you hold the phone is how great it feels in your hand.
              The cover glass curves down around the sides to meet the anodized aluminum enclosure in a remarkable,
              simplified design.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-2"></div>
</div>


{% endblock  %}



{% block modal %}

{% endblock  %}



{% block script %}

<script>
  $("#nav-item-projectmanager-home").addClass('active')
  $("#projectmanagerPages").addClass('show')
</script>
<script>
  var app = new Vue({
    el: "#app",
    data: {
      projects: JSON.parse(`{{projects_s|escapejs}}`),
      contractors: JSON.parse(`{{contractors_s|escapejs}}`),
      title_project: '',
      title_contractor: '',

    },
    methods: {
      add_project: function () {
        let url = "{% url 'projectmanager:add_project' %}"

        var posting = $.post(url,
          {
            parent_id: 0,
            title: app.title_project,
            csrfmiddlewaretoken: csrfmiddlewaretoken
          }
        );

        // Put the results in a div
        posting.done(function (data) {
          // word_app.word = (data.word);
          // word_app.definitions = (data.definitions);
          app.title_project=""
          app.projects.push(data)
        })
      },

      add_contractor: function () {
        let url = "{% url 'projectmanager:add_contractor' %}"

        var posting = $.post(url,
          {
            parent_id: 0,
            title: app.title_contractor,
            csrfmiddlewaretoken: csrfmiddlewaretoken
          }
        );

        // Put the results in a div
        posting.done(function (data) {
          // word_app.word = (data.word);
          // word_app.definitions = (data.definitions);
          app.title_contractor=""
          app.contractors.push(data)
        })
      },

    },
  })
</script>
{% endblock  %}